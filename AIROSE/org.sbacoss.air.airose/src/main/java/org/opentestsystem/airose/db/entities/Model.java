/*******************************************************************************
 * Copyright (c) 2013 American Institutes for Research
 * 
 * This file is part of AIROSE.
 * 
 * AIROSE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 2 of the License, or
 * (at your option) any later version.
 * 
 * AIROSE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with AIROSE.  If not, see <http://www.gnu.org/licenses/>.
 ******************************************************************************/
package org.opentestsystem.airose.db.entities;

import java.util.Date;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;
import javax.xml.bind.annotation.XmlAttribute;

import org.hibernate.annotations.GenericGenerator;

/*
 * Class to represent a model generated for an essay. In the database there may
 * be multiple models for the same essay - older vs. newer, different score
 * types.
 */

@Entity
@Table (name = "Model")
public class Model
{
  private Long                mId                 = (long) -1;
  // a group model id. we may have generated models for a bunch of essays.
  private String              mModelId;
  // unique essay id. if the essay has multiple scores then
  // somehow this would need to differentiate that.
  private String              mEssayId;
  // a score type - useful if the essay has multiple scores.
  private String              mScoreTypeId;
  // date this model was created.
  private Date                mDateAdded          = new Date ();
  // the type of regression used.
  private EnumRegressionModel mRegressionModel    = EnumRegressionModel.OLS;
  // number of dimensions in the sspace for this model.
  
  private int                 mNumberOfDimensions = 0;

  public Model () {
    // this form used by Hibernate
  }

  public Model (String modelId, String essayId, String scoreTypeId, EnumRegressionModel regressionModel, int numberOfDimensions) {
    // for application use, to create new events
    this.mModelId = modelId;
    this.mEssayId = essayId;
    this.mScoreTypeId = scoreTypeId;
    this.mRegressionModel = regressionModel;
    this.mNumberOfDimensions = numberOfDimensions;
  }

  @Id
  @GeneratedValue (generator = "increment")
  @GenericGenerator (name = "increment", strategy = "increment")
  public Long getId () {
    return mId;
  }

  @SuppressWarnings ("unused")
  private void setId (Long id) {
    mId = id;
  }

  @Temporal (TemporalType.TIMESTAMP)
  @Column (name = "dateAdded")
  public Date getDate () {
    return mDateAdded;
  }

  public void setDate (Date date) {
    mDateAdded = date;
  }

  @Column (name = "essayId", length = 128)
  public String getEssayId () {
    return mEssayId;
  }

  public void setEssayId (String essayId) {
    mEssayId = essayId;
  }

  @Column (name = "modelId", length = 128)
  public String getModelId () {
    return mModelId;
  }

  public void setModelId (String modelId) {
    mModelId = modelId;
  }

  @Column (name = "scoreType", length = 128)
  public String getScoreType () {
    return this.mScoreTypeId;
  }

  public void setScoreType (String scoreType) {
    this.mScoreTypeId = scoreType;
  }

  @Column (name = "regressionModelType")
  public int getRegressionModelType () {
    return mRegressionModel.ordinal ();
  }

  public void setRegressionModelType (int ordinal) {
    mRegressionModel = EnumRegressionModel.values ()[ordinal];
  }
  @XmlAttribute
  @Column (name = "numberOfDimensions")
  public int getNumberOfDimensions () {
    return mNumberOfDimensions;
  }

  public void setNumberOfDimensions (int numDimensions) {
    mNumberOfDimensions = numDimensions;
  }

}
